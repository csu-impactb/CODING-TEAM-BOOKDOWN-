<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Mouse Weights | Connect R to Microsoft Teams</title>
<meta name="author" content="Taru Dutt">
<meta name="description" content="4.0.1 Overview Extreme weight loss and loss of muscle mass, also known as cachexia, typically presents along side chronic inflammatory illnesses like Tuberculosis disease (Baazim, Antonio-Herrera,...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 4 Mouse Weights | Connect R to Microsoft Teams">
<meta property="og:type" content="book">
<meta property="og:description" content="4.0.1 Overview Extreme weight loss and loss of muscle mass, also known as cachexia, typically presents along side chronic inflammatory illnesses like Tuberculosis disease (Baazim, Antonio-Herrera,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Mouse Weights | Connect R to Microsoft Teams">
<meta name="twitter:description" content="4.0.1 Overview Extreme weight loss and loss of muscle mass, also known as cachexia, typically presents along side chronic inflammatory illnesses like Tuberculosis disease (Baazim, Antonio-Herrera,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Connect R to Microsoft Teams</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Overview</a></li>
<li><a class="" href="experimental-metadata.html"><span class="header-section-number">2</span> Experimental metadata</a></li>
<li><a class="" href="initial-mouse-characteristics.html"><span class="header-section-number">3</span> Initial mouse characteristics</a></li>
<li><a class="active" href="mouse-weights.html"><span class="header-section-number">4</span> Mouse Weights</a></li>
<li><a class="" href="colony-forming-units-to-determine-bacterial-counts.html"><span class="header-section-number">5</span> Colony forming units to determine bacterial counts</a></li>
<li><a class="" href="enzyme-linked-immunosorbest-assay-elisa.html"><span class="header-section-number">6</span> Enzyme-linked immunosorbest assay (ELISA)</a></li>
<li><a class="" href="elisa-data-processing.html"><span class="header-section-number">7</span> ELISA data processing</a></li>
<li><a class="" href="flow-cytometry.html"><span class="header-section-number">8</span> Flow cytometry</a></li>
<li><a class="" href="pathology.html"><span class="header-section-number">9</span> Pathology</a></li>
<li><a class="" href="proteomics.html"><span class="header-section-number">10</span> Proteomics</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="mouse-weights" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Mouse Weights<a class="anchor" aria-label="anchor" href="#mouse-weights"><i class="fas fa-link"></i></a>
</h1>
<div id="overview-1" class="section level3" number="4.0.1">
<h3>
<span class="header-section-number">4.0.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview-1"><i class="fas fa-link"></i></a>
</h3>
<p>Extreme weight loss and loss of muscle mass, also known as cachexia, typically presents along side chronic inflammatory illnesses like Tuberculosis disease <span class="citation">(<a href="references.html#ref-baazim2022interplay" role="doc-biblioref">Baazim, Antonio-Herrera, and Bergthaler 2022</a>)</span>. We now recognize that cachexia is part of a systemic response to inflammation, and has been linked to upregulation of pro-inflammatory cytokines such as TNF, IL-6, and IFNg in humans <span class="citation">(<a href="references.html#ref-baazim2022interplay" role="doc-biblioref">Baazim, Antonio-Herrera, and Bergthaler 2022</a>)</span>. Additionally, studies support the role of key immune cell populations such as CD8+ T-cells that, when depleted, counteract muscle and fat deterioration <span class="citation">(<a href="references.html#ref-baazim2019cd8" role="doc-biblioref">Baazim et al. 2019</a>)</span>, and suggest that CD8+ T-cells may metabolically reprogram adipose tissue.</p>
<p>In recognition of cachexia related illnesses and diseases, we tracked the progression of weight loss over the course of this study, as is done with many TB-mouse studies <span class="citation">(<a href="references.html#ref-smith2022host" role="doc-biblioref">Smith et al. 2022</a>; <a href="references.html#ref-segueni2016controlled" role="doc-biblioref">Segueni et al. 2016</a>)</span>. These data is also useful when correlating to CFU count as well as expression of cytokines and other biological markers <span class="citation">(<a href="references.html#ref-smith2022host" role="doc-biblioref">Smith et al. 2022</a>)</span>. Here, mice are weighed in grams weekly to monitor clinical status as TB patients frequently display weight loss as clinical symptom associated with disease progression.</p>
<p>The following contains information about how the data was collected, organized, and curated for analysis in RStudio.</p>
</div>
<div id="parameters" class="section level3" number="4.0.2">
<h3>
<span class="header-section-number">4.0.2</span> Parameters<a class="anchor" aria-label="anchor" href="#parameters"><i class="fas fa-link"></i></a>
</h3>
<p>Weights are recorded in an excel worksheet.</p>
<p>Column titles are as follows:</p>
<ul>
<li>
<code>who_collected</code>: Record the first name of the person who actually handled the mouse from the scale.</li>
<li>
<code>date_collected</code>: Record the date using quotation marks, with the month, then day, then year. For example, “May 31, 2022.”</li>
<li>
<code>sex</code>: Record as “m” for male or “f” for female</li>
<li>
<code>notch_id</code>: Record the ear notch pattern in the mouse. Make sure that you record consistently across all timepoints, so that each mouse can be tracked across dates. If you are doing single notches, for example, this might be “0” for no notches, “1R” for one notch in the right ear, “1L” for one notch in the left ear, and “1R1L” for one notch in each ear.</li>
<li>
<code>mouse_number</code>: Record as a number identifying mice within a cage. This should be consistent across all recorded timepoints (i.e., the mouse in a cage with ear notch “1L” might be given the number “1”; if so, its number should always be recorded in this column as “1”). This number will repeat across different cages, but if you combine this number with the cage number, it gives a unique identifier for each mouse in the study.</li>
<li>
<code>weight</code>: Record as a number, with a unit in this column. The next column will be used for the units.</li>
<li>
<code>unit</code>: Provide the units that were used to take the weight (e.g., “g” for grams)</li>
<li>
<code>cage_number</code>: Provide the cage number. If a provisional cage number is being used, … If the mouse was switched from its original cage, …</li>
<li>
<code>group</code>: Provide the experimental group of the mouse. Be sure that you use the same abbreviation or notation across each timepoint. Examples of group designations might be: bcg, saline, bcg+id93, saline+id93, saline+noMtb</li>
<li>
<code>notes</code>: The notes column contains information regarding clinical observations.</li>
</ul>
<p>good reference: <a href="https://elifesciences.org/articles/74419#s4" class="uri">https://elifesciences.org/articles/74419#s4</a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="read-in-data" class="section level3" number="4.0.3">
<h3>
<span class="header-section-number">4.0.3</span> Read in data<a class="anchor" aria-label="anchor" href="#read-in-data"><i class="fas fa-link"></i></a>
</h3>
<p>Data is stored in one excel sheet, each week is one sheet named as the date -&gt; return vector for each sheet name</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Function to add unique mouse IDs based on their most up-to-date cages</span>
<span class="co"># By using the most up-to-date cages, we can use an ID that will be easy </span>
<span class="co"># to use to identify a specific mouse at the current time (for example, </span>
<span class="co"># if you need to ID a mouse with a large change in weight that has happened</span>
<span class="co"># recently.)</span>
<span class="co">#</span>
<span class="co"># !! NEED TO CHANGE: Right now, it would miss mice that were sacrificed / died</span>
<span class="co"># !! before the latest time point that was collected</span>
<span class="va">add_latest_mouse_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mouse_weight_data</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mouse_weight_data</span> <span class="op">&lt;-</span> <span class="va">mouse_weight_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>current_cage <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="va">date_collected</span> <span class="op">!=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">last</a></span><span class="op">(</span><span class="va">date_collected</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,
    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">new_cage_number</span><span class="op">)</span> <span class="op">~</span> <span class="va">new_cage_number</span>, 
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">existing_cage_number</span>
  <span class="op">)</span>,
         mouse_id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">current_cage</span><span class="op">)</span>, 
                            <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">current_cage</span>, <span class="va">notch_id</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>, 
                            <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">mouse_weight_data</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu">add_latest_mouse_id</span><span class="op">(</span><span class="va">ex</span><span class="op">)</span>

<span class="va">ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>mouse_id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="co"># Only create for the first time point, otherwise set to NA</span>
    <span class="va">date_collected</span> <span class="op">!=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">first</a></span><span class="op">(</span><span class="va">date_collected</span><span class="op">)</span> <span class="op">~</span> <span class="cn">NA_character_</span>,
    <span class="co"># If the new cage number is missing, it means the animal did not </span>
    <span class="co"># change cages, so you can use the existing cage number</span>
    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">new_cage_number</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">existing_cage_number</span>, <span class="va">notch_id</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">new_cage_number</span>, <span class="va">notch_id</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 980 × 14
##    who_collected date_collected sex   dob        notch_id mouse_number weight
##    &lt;chr&gt;         &lt;date&gt;         &lt;fct&gt; &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
##  1 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  2 Taru          2022-05-26     f     2022-04-05 1R                  2   17.2
##  3 Taru          2022-05-26     f     2022-04-05 1L                  3   17  
##  4 Taru          2022-05-26     f     2022-04-05 1R1L                4   18.8
##  5 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  6 Taru          2022-05-26     f     2022-04-05 1R                  2   17.7
##  7 Taru          2022-05-26     f     2022-04-05 1L                  3   20.2
##  8 Taru          2022-05-26     f     2022-04-05 1R1L                4   17.1
##  9 Taru          2022-05-26     f     2022-04-05 0                   1   17.6
## 10 Taru          2022-05-26     f     2022-04-05 1R                  2   20  
## # … with 970 more rows, and 7 more variables: unit &lt;chr&gt;,
## #   existing_cage_number &lt;chr&gt;, new_cage_number &lt;chr&gt;, group &lt;chr&gt;,
## #   notes &lt;chr&gt;, current_cage &lt;chr&gt;, mouse_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">add_first_mouse_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mouse_weight_data</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mouse_weight_data</span> <span class="op">&lt;-</span> <span class="va">mouse_weight_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>mouse_id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="co"># Only create for the first time point, otherwise set to NA</span>
    <span class="va">date_collected</span> <span class="op">!=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">first</a></span><span class="op">(</span><span class="va">date_collected</span><span class="op">)</span> <span class="op">~</span> <span class="cn">NA_character_</span>,
    <span class="co"># If the new cage number is missing, it means the animal did not </span>
    <span class="co"># change cages, so you can use the existing cage number</span>
    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">new_cage_number</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">existing_cage_number</span>, <span class="va">notch_id</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">new_cage_number</span>, <span class="va">notch_id</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>
  <span class="op">)</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">mouse_weight_data</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu">add_latest_mouse_id</span><span class="op">(</span><span class="va">ex</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 980 × 14
##    who_collected date_collected sex   dob        notch_id mouse_number weight
##    &lt;chr&gt;         &lt;date&gt;         &lt;fct&gt; &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
##  1 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  2 Taru          2022-05-26     f     2022-04-05 1R                  2   17.2
##  3 Taru          2022-05-26     f     2022-04-05 1L                  3   17  
##  4 Taru          2022-05-26     f     2022-04-05 1R1L                4   18.8
##  5 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  6 Taru          2022-05-26     f     2022-04-05 1R                  2   17.7
##  7 Taru          2022-05-26     f     2022-04-05 1L                  3   20.2
##  8 Taru          2022-05-26     f     2022-04-05 1R1L                4   17.1
##  9 Taru          2022-05-26     f     2022-04-05 0                   1   17.6
## 10 Taru          2022-05-26     f     2022-04-05 1R                  2   20  
## # … with 970 more rows, and 7 more variables: unit &lt;chr&gt;,
## #   existing_cage_number &lt;chr&gt;, new_cage_number &lt;chr&gt;, group &lt;chr&gt;,
## #   notes &lt;chr&gt;, current_cage &lt;chr&gt;, mouse_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Function to get the cage history of a mouse based on it's latest mouse ID</span>
<span class="co"># and the mouse weight data. This works back through cage changes to track the </span>
<span class="co"># cages that a mouse has been in over the course of the experiment. </span>
<span class="va">get_cage_history</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">latest_mouse_id</span>, 
                             <span class="va">mouse_weight_data</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">cage_history</span> <span class="op">&lt;-</span> <span class="va">latest_mouse_id</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="st">"\\-.+"</span><span class="op">)</span>
  <span class="va">last_cage</span> <span class="op">&lt;-</span> <span class="va">cage_history</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
  
  <span class="kw">while</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">last_cage</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span>
    <span class="va">last_cage</span> <span class="op">&lt;-</span> <span class="va">mouse_weight_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">new_cage_number</span> <span class="op">==</span> <span class="va">last_cage</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">existing_cage_number</span><span class="op">)</span>
    <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">last_cage</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">cage_history</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">cage_history</span>, <span class="va">last_cage</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span>
  
  <span class="va">cage_history</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">cage_history</span><span class="op">)</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">cage_history</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu">get_cage_history</span><span class="op">(</span>latest_mouse_id <span class="op">=</span> <span class="st">"22009A-0"</span>, 
                 mouse_weight_data <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "22009A" "22009"</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ex_cage_history</span> <span class="op">&lt;-</span> <span class="fu">get_cage_history</span><span class="op">(</span>latest_mouse_id <span class="op">=</span> <span class="st">"22009A-0"</span>, 
                 mouse_weight_data <span class="op">=</span> <span class="va">ex</span><span class="op">)</span>


<span class="co"># Use the function to get cage histories for all the mice</span>
<span class="va">latest_mouse_ids</span> <span class="op">&lt;-</span> <span class="va">ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">mouse_id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">mouse_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span>
  
<span class="va">mouse_cage_histories</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">latest_mouse_ids</span>, <span class="va">get_cage_history</span>, 
                                   mouse_weight_data <span class="op">=</span> <span class="va">ex</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mouse_cage_histories</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">latest_mouse_ids</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">add_one_mouse_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">latest_mouse_id</span>, <span class="va">cage_history</span>, <span class="va">mouse_weight_data</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mouse_notch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="va">latest_mouse_id</span>, <span class="st">".+\\-"</span><span class="op">)</span>
  
  <span class="va">mouse_weight_data</span> <span class="op">&lt;-</span> <span class="va">mouse_weight_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>mouse_id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="op">(</span><span class="va">existing_cage_number</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">cage_history</span><span class="op">)</span> <span class="op">&amp;</span> 
                                <span class="va">notch_id</span> <span class="op">==</span> <span class="va">mouse_notch</span>, 
           <span class="va">latest_mouse_id</span>, 
           <span class="va">mouse_id</span><span class="op">)</span><span class="op">)</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">mouse_weight_data</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu">add_one_mouse_id</span><span class="op">(</span>latest_mouse_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mouse_cage_histories</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, 
                 cage_history <span class="op">=</span> <span class="va">mouse_cage_histories</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, 
                 mouse_weight_data <span class="op">=</span> <span class="va">ex</span><span class="op">)</span>

<span class="va">ex2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">existing_cage_number</span> <span class="op">==</span> <span class="st">"22003"</span> <span class="op">&amp;</span> <span class="va">notch_id</span> <span class="op">==</span> <span class="st">"0"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 14
##   who_collected date_collected sex   dob        notch_id mouse_number weight
##   &lt;chr&gt;         &lt;date&gt;         &lt;fct&gt; &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
## 1 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
## 2 Forrest       2022-06-03     f     2022-04-05 0                   1   19  
## 3 Pablo         2022-06-09     f     2022-04-05 0                   1   19.3
## 4 Forrest       2022-06-16     f     2022-04-05 0                   1   20.9
## 5 Amanda        2022-06-21     f     2022-04-05 0                   1   20.9
## 6 Forrest       2022-07-01     f     2022-04-05 0                   1   22  
## 7 Pablo         2022-07-07     f     2022-04-05 0                   1   23.1
## # … with 7 more variables: unit &lt;chr&gt;, existing_cage_number &lt;chr&gt;,
## #   new_cage_number &lt;chr&gt;, group &lt;chr&gt;, notes &lt;chr&gt;, current_cage &lt;chr&gt;,
## #   mouse_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">mouse_cage_histories</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu">add_one_mouse_id</span><span class="op">(</span>latest_mouse_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mouse_cage_histories</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, 
                         cage_history <span class="op">=</span> <span class="va">mouse_cage_histories</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, 
                         mouse_weight_data <span class="op">=</span> <span class="va">ex</span><span class="op">)</span> 
<span class="op">}</span>

<span class="va">ex</span></code></pre></div>
<pre><code>## # A tibble: 980 × 14
##    who_collected date_collected sex   dob        notch_id mouse_number weight
##    &lt;chr&gt;         &lt;date&gt;         &lt;fct&gt; &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
##  1 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  2 Taru          2022-05-26     f     2022-04-05 1R                  2   17.2
##  3 Taru          2022-05-26     f     2022-04-05 1L                  3   17  
##  4 Taru          2022-05-26     f     2022-04-05 1R1L                4   18.8
##  5 Taru          2022-05-26     f     2022-04-05 0                   1   18.4
##  6 Taru          2022-05-26     f     2022-04-05 1R                  2   17.7
##  7 Taru          2022-05-26     f     2022-04-05 1L                  3   20.2
##  8 Taru          2022-05-26     f     2022-04-05 1R1L                4   17.1
##  9 Taru          2022-05-26     f     2022-04-05 0                   1   17.6
## 10 Taru          2022-05-26     f     2022-04-05 1R                  2   20  
## # … with 970 more rows, and 7 more variables: unit &lt;chr&gt;,
## #   existing_cage_number &lt;chr&gt;, new_cage_number &lt;chr&gt;, group &lt;chr&gt;,
## #   notes &lt;chr&gt;, current_cage &lt;chr&gt;, mouse_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Explore this data a bit</span>
<span class="va">ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_collected</span>, y <span class="op">=</span> <span class="va">weight</span>, group <span class="op">=</span> <span class="va">mouse_id</span>, color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">group</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="csu-impactb_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_collected</span>, y <span class="op">=</span> <span class="va">weight</span>, color <span class="op">=</span> <span class="va">who_collected</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="csu-impactb_files/figure-html/unnamed-chunk-8-2.png" width="672"></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eclarke/ggbeeswarm">ggbeeswarm</a></span><span class="op">)</span>
<span class="va">ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">date_collected</span> <span class="op">==</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">last</a></span><span class="op">(</span><span class="va">date_collected</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">group</span>, y <span class="op">=</span> <span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_beeswarm.html">geom_beeswarm</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="csu-impactb_files/figure-html/unnamed-chunk-8-3.png" width="672"></div>
</div>
<div id="can-also-use-rio-to-read-in-the-data-more-streamlined" class="section level3" number="4.0.4">
<h3>
<span class="header-section-number">4.0.4</span> Can also use rio to read in the data, more streamlined<a class="anchor" aria-label="anchor" href="#can-also-use-rio-to-read-in-the-data-more-streamlined"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="clean-data" class="section level3" number="4.0.5">
<h3>
<span class="header-section-number">4.0.5</span> Clean data<a class="anchor" aria-label="anchor" href="#clean-data"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">before_vaccination</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
 <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"mouse_number"</span>, <span class="st">"weight"</span>, <span class="st">"existing_cage_number"</span>, <span class="st">"group"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># combining columns mouse_number and cage_number</span>

<span class="va">dataset</span><span class="op">$</span><span class="va">mouse_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">$</span><span class="va">mouse_number</span>, <span class="st">"-"</span>, <span class="va">dataset</span><span class="op">$</span><span class="va">cage_number</span><span class="op">)</span></code></pre></div>
</div>
<div id="body-weight-over-time-graph-and-statistics" class="section level3" number="4.0.6">
<h3>
<span class="header-section-number">4.0.6</span> Body weight over time graph and statistics<a class="anchor" aria-label="anchor" href="#body-weight-over-time-graph-and-statistics"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="weight-loss-over-time-graph-and-statistics" class="section level3" number="4.0.7">
<h3>
<span class="header-section-number">4.0.7</span> Weight loss over time graph and statistics<a class="anchor" aria-label="anchor" href="#weight-loss-over-time-graph-and-statistics"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="weight-vs-cfu" class="section level3" number="4.0.8">
<h3>
<span class="header-section-number">4.0.8</span> Weight vs CFU<a class="anchor" aria-label="anchor" href="#weight-vs-cfu"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="weight-vs-elisa-results" class="section level3" number="4.0.9">
<h3>
<span class="header-section-number">4.0.9</span> Weight vs ELISA results<a class="anchor" aria-label="anchor" href="#weight-vs-elisa-results"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="weight-vs-lesion-burden" class="section level3" number="4.0.10">
<h3>
<span class="header-section-number">4.0.10</span> Weight vs lesion burden<a class="anchor" aria-label="anchor" href="#weight-vs-lesion-burden"><i class="fas fa-link"></i></a>
</h3>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="initial-mouse-characteristics.html"><span class="header-section-number">3</span> Initial mouse characteristics</a></div>
<div class="next"><a href="colony-forming-units-to-determine-bacterial-counts.html"><span class="header-section-number">5</span> Colony forming units to determine bacterial counts</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav"><li>
<a class="nav-link" href="#mouse-weights"><span class="header-section-number">4</span> Mouse Weights</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#overview-1"><span class="header-section-number">4.0.1</span> Overview</a></li>
<li><a class="nav-link" href="#parameters"><span class="header-section-number">4.0.2</span> Parameters</a></li>
<li><a class="nav-link" href="#read-in-data"><span class="header-section-number">4.0.3</span> Read in data</a></li>
<li><a class="nav-link" href="#can-also-use-rio-to-read-in-the-data-more-streamlined"><span class="header-section-number">4.0.4</span> Can also use rio to read in the data, more streamlined</a></li>
<li><a class="nav-link" href="#clean-data"><span class="header-section-number">4.0.5</span> Clean data</a></li>
<li><a class="nav-link" href="#body-weight-over-time-graph-and-statistics"><span class="header-section-number">4.0.6</span> Body weight over time graph and statistics</a></li>
<li><a class="nav-link" href="#weight-loss-over-time-graph-and-statistics"><span class="header-section-number">4.0.7</span> Weight loss over time graph and statistics</a></li>
<li><a class="nav-link" href="#weight-vs-cfu"><span class="header-section-number">4.0.8</span> Weight vs CFU</a></li>
<li><a class="nav-link" href="#weight-vs-elisa-results"><span class="header-section-number">4.0.9</span> Weight vs ELISA results</a></li>
<li><a class="nav-link" href="#weight-vs-lesion-burden"><span class="header-section-number">4.0.10</span> Weight vs lesion burden</a></li>
</ul>
</li></ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Connect R to Microsoft Teams</strong>" was written by Taru Dutt. It was last built on 2022-10-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
